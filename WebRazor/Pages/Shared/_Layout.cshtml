@inject IConfiguration Configuration
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - AttendanceSystem</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="api-base-url" content="@Configuration["ApiBaseUrl"]" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
    <style>
        body { background: linear-gradient(120deg, #f0f4ff 0%, #f8fafc 100%); font-family: 'Segoe UI', Arial, sans-serif; }
        .navbar { background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.04); }
        .navbar .navbar-brand, .navbar .fw-bold, .navbar .text-primary {
            color: #2563eb !important;
        }
        .navbar .text-secondary, .navbar .btn-outline-secondary {
            color: #bfc9da !important;
            border-color: #23263a !important;
        }
        .navbar .btn-outline-secondary:hover {
            background: #23263a;
            color: #fff !important;
        }
        .sidebar, .sidebar-employee-dark { box-shadow: 0 4px 32px rgba(24,28,47,0.18); }
        .content { padding: 2.5rem 2rem; background: none; }
        .main-gap { gap: 28px; }
        .card { border-radius: 1.5rem; box-shadow: 0 6px 32px rgba(37,99,235,0.08); border: none; background: #fff; }
        .card:hover { box-shadow: 0 12px 48px rgba(37,99,235,0.16); }
        .dashboard-icon { width: 64px; height: 64px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; margin: 0 auto 1rem auto; background: #e0e7ef; }
        .dashboard-icon.primary { background: #e0e7ef; color: #2563eb; }
        .dashboard-icon.success { background: #d1fae5; color: #059669; }
        .dashboard-icon.warning { background: #fef9c3; color: #b45309; }
        .dashboard-icon.danger { background: #fee2e2; color: #b91c1c; }
        .dashboard-icon.info { background: #e0f2fe; color: #2563eb; }
        .badge-status { border-radius: 1rem; font-size: 1rem; padding: 0.4em 1.2em; }
        .badge-ontime { background: #d1fae5; color: #065f46; }
        .badge-late { background: #fef9c3; color: #92400e; }
        .badge-absent { background: #fee2e2; color: #991b1b; }
        .badge-pending { background: #e0e7ef; color: #3730a3; }
        .btn-main { background: #2563eb; color: #fff; border-radius: 2rem; font-weight: 600; padding: 0.6rem 2rem; }
        .btn-main:hover { background: #1e40af; color: #fff; }
        .table { background: #fff; border-radius: 1.2rem; overflow: hidden; }
        .table th, .table td { vertical-align: middle; }
        .form-control, .form-select { border-radius: 1.2rem; }
        .shadow-sm { box-shadow: 0 2px 8px rgba(0,0,0,0.06) !important; }
        .fw-bold { font-weight: 700 !important; }
        .fs-2 { font-size: 2rem !important; }
        .fs-4 { font-size: 1.5rem !important; }
        .fs-5 { font-size: 1.25rem !important; }
        .text-primary { color: #2563eb !important; }
        .text-success { color: #059669 !important; }
        .text-warning { color: #b45309 !important; }
        .text-danger { color: #b91c1c !important; }
        .text-info { color: #2563eb !important; }
        .rounded-pill { border-radius: 2rem !important; }
        .mb-4 { margin-bottom: 2rem !important; }
        .mb-5 { margin-bottom: 3rem !important; }
        .py-4 { padding-top: 2rem !important; padding-bottom: 2rem !important; }
        .py-5 { padding-top: 3rem !important; padding-bottom: 3rem !important; }
        .g-4 { gap: 2rem !important; }
        .g-5 { gap: 3rem !important; }
        .justify-content-center { justify-content: center !important; }
        .align-items-center { align-items: center !important; }
        .shadow { box-shadow: 0 4px 24px rgba(37,99,235,0.10) !important; }
    </style>
    @RenderSection("Styles", required: false)
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark px-4">
        <a class="navbar-brand fw-bold d-flex align-items-center" href="/">
            <svg width="36" height="36" viewBox="0 0 36 36" fill="none">
                <circle cx="18" cy="18" r="18" fill="#2563eb"/>
                <path d="M10 26c0-4 8-4 8-8s-8-4-8-8" stroke="#fff" stroke-width="2" fill="none"/>
                <circle cx="18" cy="10" r="2" fill="#fff"/>
            </svg>
            <span class="fw-bold ms-2" style="font-size:1.3rem; color:#2563eb;">AttendanceSystem</span>
        </a>
        <div class="ms-auto d-flex align-items-center">
            <span class="me-3 text-secondary"><i class="bi bi-person-circle me-1"></i>@User.Identity?.Name</span>
            @* <a href="#" onclick="logout(); return false;" class="btn btn-outline-secondary btn-sm rounded-pill">Logout</a> *@
        </div>
    </nav>
    <div class="d-flex main-gap" style="min-height: 100vh;">
        @if (User.IsInRole("Employee"))
        {
            @await Html.PartialAsync("_SidebarEmployee")
        }
        else if (User.IsInRole("Admin"))
        {
            <nav class="col-md-2 d-none d-md-block sidebar py-4">
                <div class="nav flex-column">
                    <a class="nav-link" href="/DashboardAdmin">Dashboard</a>
                    <a class="nav-link" href="/Employee">Employee Management</a>
                    <a class="nav-link" href="/WorkSchedule/WorkScheduleAdminIndex">Work Schedules</a>
                    @* <a class="nav-link" href="/Attendance/AdminIndex">Attendance Management</a> *@
                    <a class="nav-link" href="/Attendance/MachineAttendance">Attendance Machine</a>
                    <a class="nav-link" href="">Salary</a>
                    @* <a class="nav-link" href="/Notification/AdminIndex">Notifications</a>
                    <a class="nav-link" href="/CorrectionRequest/AdminIndex">Correction Requests</a> *@
                </div>
            </nav>
        }
        <main class="flex-grow-1 content" style="padding-left:0;">
            @RenderBody()
        </main>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/auth-helper.js"></script>
    <script src="~/js/api-helper.js"></script>
    @RenderSection("Scripts", required: false)
    <script>
async function logout() {
    if (window.apiHelper && window.apiHelper.token) {
        await window.apiHelper.post('/api/Account/logout', {});
    }
    
    if (window.authHelper) {
        window.authHelper.clearToken();
    } else {
        localStorage.clear();
        sessionStorage.clear();
        document.cookie = 'AccessToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
    }
    
    window.location.href = '/Account/Login';
}
</script>

</body>
</html>